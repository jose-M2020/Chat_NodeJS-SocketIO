<div class="row mx-auto vh-100 w-100 justify-content-center align-items-center">
	<div class="col-md-4">
		<div class="card animate__animated animate__fadeIn">
			<div class="card-header text-center" style="background: #2a3132; color: white;">
				<h4>Iniciar sesión</h4>
			</div>
			<div class="card-body">
				<form id="signin" action="/signin" method="POST">
					<div class="form-group">
						<label for="email">Correo electronico:</label>
						<input type="email" placeholder="example@gmail.com" name="email" class="form-control">
					</div>
					<div class="form-group">
						<label for="password">Contraseña:</label>
						<input type="password" placeholder="********" name="password" class="form-control">
					</div>
					<div class="form-group text-center">
						<button class="btn btn-primary btn-lg px-3 py-2" type="submit">Ingresar</button>
					</div>
				</form>
			</div>
			<div class="card-footer bg-white text-center">
				<p>¿No tienes cuenta? <a href="/signup">Registrate</a></p>
			</div>
		</div>
	</div>
</div>

<script>
	const form = document.getElementById('signin'),
		  inputs = document.querySelectorAll('#signin input');
	let emailAddr;

	form.addEventListener('submit', e => {
		e.preventDefault();
		console.log('submit')
		let errors = [];

		inputs.forEach(input => {
			const {name} = input;
			if(input.value.trim().length === 0){
				errors.push(name);	
			}
			if(name === 'email'){
				emailAddr = input.value.trim();
			}
		})
		
		if(errors.length > 0){
			toastr.error('Completa todos los campos.', 'Error!');
		}
		else if(!(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(emailAddr))){
			toastr.error('El email es incorrecto.', 'Error!');
		}
		else{
			console.log('ready to submit!');
			form.submit();
		}
	})
</script>